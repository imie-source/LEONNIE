<html>
<head>
 
<script>
var Img=new Array;
Img[0]="01.jpg";
Img[1]="02.jpg";
Img[2]="03.jpg";
Img[3]="04.jpg"; 
var i=0;
 
/**
 * Modifie l'opacité d'une image.
 *
 * @param string imageId Identifiant de la balise image.
 * @param string method Type de modification à effectuer : "appear" ou "disappear".
 * @param function successFunction Fonction à exécuter une fois la modification temrinée.
 */ 
function changeAppearance(imageId, method, successFunction)
{
    var img = document.getElementById(imageId);
    // Temps en milliseconde pour l'animation.
    var speed = 30;
 
    // Initialisation des valeurs en fonction du type d'animation.
    switch (method) {
        case 'appear': 
            var defaultValue = 0;
            var finalValue = 1;
            var opacityIncrement = 0.05;
            break;
        case 'disappear':
            var defaultValue = 1;
            var finalValue = 0;
            var opacityIncrement = -0.05;
            break;
    }
 
    if (img.style.opacity == '') img.style.opacity = defaultValue;
    // Modification de l'opacité tant qu'on a pas atteint la valeur finale attendue.
    if (img.style.opacity != finalValue) {
        img.style.opacity = parseFloat(img.style.opacity) + opacityIncrement;
        // Replanification de la prochaine "frame".
        setTimeout(function () { changeAppearance(imageId, method, successFunction); }, speed);
    }
    // Exécution de la fonction quand l'animation est terminée.
    else if(typeof successFunction == 'function') {

        successFunction();
    }
	alert('coucou');
}
 
function renew(index) {
	alert('renew('+index+')');
    // Disparition de l'image, puis exécution du changement d'image et réapparition quand la première animation est terminée.
    changeAppearance('pic', 'disappear', function () {
        change(index);
        changeAppearance('pic', 'appear');      
    });
}
 
function change(index) {
    alert('change('+index+')');
	document.getElementById('pic').src=Img[index];
    i++;
    if (i < Img.length)
    {
        setTimeout('renew('+i+')',1500); 
    } 
}
setTimeout('renew('+i+')',1500);
 
</script>
 
</head>
<body>
		<img src="01.jpg" id="pic">
</body>
</html>